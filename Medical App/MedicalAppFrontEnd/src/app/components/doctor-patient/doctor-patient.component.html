<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
  </head>
  <body>
    <header id="backgrd" style="background-image: url('assets/login/images/health_care.jpg')">
    <div class="doctorPageAddPatient">
    <div class="container">
      <p>
    <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
      Add Patient
    </button>
    </p>
    <div class="collapse" id="collapseExample">
    <div class="card card-body">
      <form>
    <div class="form-row">
      <div class="form-group col-md-6">
        <label for="inputUsername">Username</label>
        <input type="text" class="form-control" id="inputUsername" placeholder="Username" [(ngModel)] = "patientUser.username" name="username">
      </div>
      <div class="form-group col-md-6">
        <label for="inputPassword4">Password</label>
        <input type="password" class="form-control" id="inputPassword4" placeholder="Password"  [(ngModel)] = "patientUser.password" name="pass">
      </div>
    </div>
    <div class="form-group col-md-6">
      <label for="inputName">Name</label>
      <input type="text" class="form-control" id="inputName" placeholder="Name" [(ngModel)] = "patientUser.name" name="name">
    </div>
    <div class="form-group col-md-6">
      <label for="inputEmail">Email</label>
      <input type="text" class="form-control" id="inputEmail" placeholder="Email" [(ngModel)] = "patientUser.email" name="email">
    </div>
    <div class="form-row">
      <div class="form-group col-md-4">
        <label for="inputBirthdate">Birthdate</label>
        <input type="date" class="form-control" id="inputBirthdate" [(ngModel)] = "patientUser.birthdate" name="birth">
      </div>
      <div class="form-group col-md-4">
        <label for="inputGender">Gender</label>
        <select id="inputGender" class="form-control" [(ngModel)] = "patientUser.gender" name="gender">
          <option selected>Male</option>
          <option>Female</option>
        </select>
      </div>
      <div class="form-group col-md-4">
        <label for="inputCaregiver">Caregiver Username</label>
        <input type="text" class="form-control" id="inputCaregiver" [(ngModel)] = "caregiverUseraname" name="caregiveruser">
      </div>
      <div class="form-group col-md-12">
        <label for="inputAddress">Address</label>
        <input type="text" class="form-control" id="inputAddress" [(ngModel)] = "patientUser.address" name="address">
      </div>

      <div class="form-group col-md-12">
        <label for="inputMedicalRecord">Medical Record</label>
        <input type="text" class="form-control" id="inputMedicalRecord" [(ngModel)] = "patient.medicalRecord" name="medicalRecord">
      </div>
    </div>

    <div class="form-group col-md-11">
      <button type="submit" class="btn btn-primary" (click)="addPatient()">Sign up</button>
        <p style="color:black;text-align:center">{{errorMessageSignUp}}</p>
    </div>
  </form>
</div>
</div>


    <div class="patientTable">
    <div class="container">
      <table class="table table-hover">
      <thead class="thead-dark">
        <tr>
          <th scope="col" style = "color:black">Username</th>
          <th scope="col" style = "color:black">Name</th>
          <th scope="col" style = "color:black">Email</th>
          <th scope="col" style = "color:black">Birthdate</th>
          <th scope="col" style = "color:black">Gender</th>
          <th scope="col" style = "color:black">Address</th>
          <th scope="col" style = "color:black">Medical Record</th>
          <th scope="col" style = "color:black"></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor = "let p of patientsByDoctor;let i = index;let j = index">
          <td  contenteditable='true'(input)="onRowClickPatient($event,'username',p)" style = "color:black">{{p.user.username}}</td>
          <td contenteditable='true' (input)="onRowClickPatient($event,'name',p)" style = "color:black">{{p.user.name}}</td>
          <td contenteditable='true' (input)="onRowClickPatient($event,'email',p)" style = "color:black">{{p.user.email}}</td>
          <td contenteditable='true' (input)="onRowClickPatient($event,'birthdate',p)" style = "color:black">{{p.user.birthdate}}</td>
          <td contenteditable='true' (input)="onRowClickPatient($event,'gender',p)" style = "color:black">{{p.user.gender}}</td>
          <td contenteditable='true' (input)="onRowClickPatient($event,'address',p)" style = "color:black">{{p.user.address}}</td>
          <td contenteditable='true' (input)="onRowClickPatient($event,'medicalRecord',p)" style = "color:black">{{p.medicalRecord}}</td>
          <td contenteditable='false' style = "color:black">

            <button type="button" class="btn btn-danger" (click)="deletePatient(p)">Delete</button>
            <button type="button" class="btn btn-success" (click)="updatePatient()">Edit</button>
            <button class="btn btn-primary" type="button" data-toggle="collapse" aria-expanded="false" aria-controls="collapseExample" attr.data-target="#{{i}}">
              Medication Plan
            </button>

            <div class="collapse" id="{{i}}">
            <div class="card card-body">
              <form>
            <div class="form-row">
              <div class="form-group col-md-6">
                <label for="inputStartTime">StartTime</label>
                <input type="date" class="form-control" id="inputStartTime" placeholder="StartTime" [(ngModel)] = "medicationPlan.startTime" name="startTime">
              </div>
              <div class="form-group col-md-6">
                <label for="inputEndTime">EndTime</label>
                <input type="date" class="form-control" id="inputEndTime" placeholder="EndTime"  [(ngModel)] = "medicationPlan.endTime" name="endTime">
              </div>
              <div class="form-group col-md-6">
                <button type="button" class="btn btn-danger" (click)="addMedicationPlan(p)">Add</button>
              </div>
            </div>
            </form>
            </div>
            </div>

            <button class="btn btn-success" type="button" data-toggle="collapse" aria-expanded="false" aria-controls="collapseExample1" attr.data-target="#{{j-2000}}">
              History
            </button>
            <div class="collapse" id="{{j-2000}}">
                <div class="form-group col-md-8">
                  <br>
                <input type="date" class="form-control" id="inputActivityDate" placeholder="Date"  [(ngModel)] = "activitiesRequest.startDate" name="inputActivityDate">

                </div>
                <div class="form-group col-md-2">
                    <br>
                    <button type="button" class="btn btn-primary" (click)="navigateToHistory(p.idPatient,activitiesRequest.startDate)">Show</button>
                </div>
            </div>


          </td>
        </tr>
      </tbody>
    </table>
    </div>
    </div>
  </div>
  </div>
  </header>
</body>
</html>
